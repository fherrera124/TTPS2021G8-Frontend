<div class="modal-content">
  <div class="modal-header">
    <div class="modal-title h4" id="example-modal-sizes-title-lg">
      <ng-container >
         Detalle de estudio
      </ng-container>
    </div>
  </div>
  <div
    class="overlay overlay-block cursor-default modal-body"
    style="min-height: 400px">
    <ng-container >
        <div class="form-group row">
          <div class="col-lg-4">
            <span><b>Tipo de Estudio</b></span>
            <br>
            <span>{{study.type_study.name}}</span>
          </div>
          <div class="col-lg-4">
            <span><b>Paciente: </b></span>
            <br>
            <span>{{study.patient.first_name}}, {{study.patient.last_name}}</span>
          </div>
          <div class="col-lg-4">
            <span><b>Médico derivante: </b></span>
            <br>
            <span>{{study.referring_physician.first_name}}, {{study.referring_physician.last_name}}</span>          
          </div>
        </div>
        <div class="form-group row">  
          <div class="col-lg-4">
            <span><b>Diagnóstico: </b></span>
            <br>
            <span>{{study.presumptive_diagnosis.name}}</span>          
          </div>
          <div class="col-lg-4">
            <span><b>Presupuesto: </b></span>
            <br>
            <span>{{study.budget}}</span>          
          </div>
        </div>
    </ng-container>
    <ng-container>
      <ng-container >
        <br>
        <h5><u>Historial de pasos de estados</u></h5> 
     </ng-container>
      <table class="table table-head-custom table-vertical-center overflow-hidden">
        <thead>
          <th>
            Usuario
          </th>
          <th>
            Estado
          </th>
          <th>
            Fecha de ingreo al estado
          </th>
        </thead>
        <tbody>
          <tr *ngFor="let state of study.states">
            <td>{{ state.updated_by.first_name }} {{ state.updated_by.last_name }}</td>
            <td>{{ state.state}} </td>
            <td>{{ state.state_entered_date | date: 'dd-MM-yyyy, h:mm a'}}</td>
          </tr>
        </tbody>
      </table>
    </ng-container>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="downloadBudget(study.id)">Descargar presupuesto</button>
    <button
      type="button"
      class="btn btn-light btn-elevate mr-2"
      (click)="modal.dismiss()"
    >
      Cerrar
    </button>
  </div>
</div>
